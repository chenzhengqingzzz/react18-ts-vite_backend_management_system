# React18+TypeScript+Vite 的通用后台管理系统

Ant Design of React官网：https://ant.design/docs/react/introduce-cn

# 一、创建项目

```shell
npm init vite
Project name: lege-management
select a framework: react
select a variant: react-ts
```

打开package.json,参考以下个模块版本：

`src/package.json`

```json
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-redux": "^7.2.8",
    "react-router-dom": "^6.3.0",
    "redux": "^4.1.2",
  },
```

# 二、项目目录初始化

`src/main.tsx`修改成：

```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'

ReactDOM.createRoot(document.getElementById('root') as HTMLElement).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

`src/App.tsx`修改成：

```tsx
import { useState } from 'react'

function App() {
  const [count, setCount] = useState(0)

  return (
    <div className='App'>
      顶级组件
    </div>
  )
}

export default App
```

# 三、样式初始化

我们可以用`reset-css`这个库干净利落地去除默认样式，更适合在企业中使用

执行命令安装`reset-css`：

```shell
npm i reset-css
```

`src/main.tsx`引入`reset-css`

```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
// 全局引入reset-css 样式初始化一般放在最前
import 'reset-css'
// UI框架的样式

// 组件的样式

import App from './App.tsx'
```

<img src="/Users/chenzhengqing/Library/Application Support/typora-user-images/image-20230623181647455.png" alt="image-20230623181647455" style="zoom:67%;" />

# 四、SCSS的安装和初步使用

安装sass：

```shell
# 安装sass vite中很方便 loader这些都不用自己配置 只需要安装好即可使用
npm i --save-dev sass
```

src新建样式文件夹：

`src/assets/styles`

```scss
$color: pink;
body {
    background-color: $color;
    // 禁止文字选中
    user-select: none;
}

img {
    // 禁止拖动图片
    -webkit-user-drag: none;
}
```

在入口文件引入这个全局样式

`src/main.tsx`

```tsx
// 全局样式
import './assets/styles/global.scss'
```

我们在全局样式里设置了无法拖动图片 无法选中文字等一系列操作 并且设置了背景图片

<img src="/Users/chenzhengqing/Library/Application Support/typora-user-images/image-20230623183026031.png" alt="image-20230623183026031" style="zoom:67%;" />

# 五、配置项目路径别名

## 5.1 路径别名的配置

目前ts对@指向src目录的提示是不支持的，vite默认也是不支持的

所以需要手动配置@符号的指向

`src/vite.config.ts`

```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src')
    }
  }
})
```

<img src="/Users/chenzhengqing/Library/Application Support/typora-user-images/image-20230623184413734.png" alt="image-20230623184413734" style="zoom:67%;" />

这时候引入path模块会爆红，但其实我们已经已经有node环境，所以就一定会有path模块，只是因为ts的语言特性，缺少了一些声明配置

所以需要安装关于node这个库的ts声明配置

```shell
npm i -D @types/node
```

安装成功就不会爆红了 如果import后面的path爆红，就把引入换成`import * as path from 'path'`

这之后我们就可以把@符号指代成src了 是绝对路径

## 5.2 配置路径别名的提示

虽然现在路径别名已经有了，但是在文件中输入@是没有提示路径的

<img src="/Users/chenzhengqing/Library/Application Support/typora-user-images/image-20230623190032546.png" alt="image-20230623190032546" style="zoom:67%;" />

需要我们在`tsconfig.json`中添加两项配置

`src/tsconfig.json`

```json
    "baseUrl": "./",
    "paths": {
      "@/*": [
        "src/*"
      ]
    },
```

<img src="/Users/chenzhengqing/Library/Application Support/typora-user-images/image-20230624144450710.png" alt="image-20230624144450710" style="zoom:67%;" />

这样就会有了提示
